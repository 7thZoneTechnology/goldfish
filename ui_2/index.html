<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" type="image/ico" href="ucrso-logo.ico"/>
	<title>
		{{tab}}
	</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="lib/font-awesome/css/font-awesome.css">
	<link rel="stylesheet" href="lib/bootstrap-datepicker-1.6.4-dist/css/bootstrap-datepicker3.min.css">
	<link rel="stylesheet" href="lib/toastr-master/build/toastr.min.css">
	<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/styles.css">
</head>
<body>
	<div id="app">
		<div class="modal fade" tabindex="-1" role="dialog" id="modal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span>&times;</span></button>
						<h4 class="modal-title">{{modal.title}}</h4>
						
					</div>
					<div class="modal-body">
						<p>
							{{modal.message}}
						</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
						<button type="button" class="btn btn-primary" id="modal-action">{{modal.action}}</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#/prestamos">Biblioteca</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li  v-if="user.name">
							<router-link to="/panel-prestamos">
								<i class="fa fa-bookmark" aria-hidden="true"></i> Prestar/Devolver
							</router-link>
						</li>
						<li  v-if="user.name">
							<router-link to="/historial">
								<i class="fa fa-history" aria-hidden="true"></i> Historial de prestamos
							</router-link>
						</li>
						<li  v-if="user.name"><a href="#/personas/1"><i class="fa fa-users" aria-hidden="true"></i> Personas</a></li>
						<li class="dropdown"  v-if="user.name && user.role_id == 1">
							<li v-if="user.name">
								<router-link to="/gestion/1">
									<i class="fa fa-archive" aria-hidden="true"></i> Gestión <span class="sr-only">(current)</span>
								</router-link>
							</li>
							<li v-if="user.name">
								<router-link to="/administrador">
									<i class="fa fa-tachometer" aria-hidden="true"></i> Panel administrativo <span class="sr-only">(current)</span>
								</router-link>
							</li>
							
						</li>
						
					</ul>
					
					<ul class="nav navbar-nav navbar-right" >
						<li >
							<a class = "fa fa-question" style="color: white;" href="#/" v-on:click="showHelp()" class="btn btn-primary"></a>
 						</li>
						<li class="dropdown" v-if="user.name">
							<a  href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="padding: 13px;">
								<img 
									v-bind:src="(user.photos.length > 0)?imgDir+(user.photos[0]).path:imgDir+defaultUserImg"
									v-bind:alt="'Imagen de ' + user.name"
									class="img-rounded"
									style="width: 24px;"
								>
								{{user.name}}
								<span class="caret" ></span></a>
							<ul class="dropdown-menu">
								<li>
									<router-link :to="{ name: 'usuario', params: { id: user.id }}" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
										<i class="fa fa-user"></i> Perfil
									</router-link>
								</li>
								<li>
									<a href="#">
										<i class="fa fa-lock"></i>
										Cambiar contraseña
									</a>
								</li>
								<li role="separator" class="divider"></li>
								<li><a style="cursor: pointer" v-on:click="logout()"><i class="fa fa-sign-out"></i>Salir</a></li>
							</ul>
						</li>
						<li v-if="user.name">
							<a class = "fa fa-cog fa-2x" style="color: white;" href="#/generalConfig" class="btn btn-primary"></a>
						</li>
						
					</ul>
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->
		</nav>
	
	<router-view></router-view>
	</div>
	<div style="display:none" id="loginTemplate">
		<div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4">
			<div class="well row">
				<h3 class="text-center">
					<i class="fa fa-user-circle-o fa-5x"></i>
					<br/>
					<br/>
					Inicio de sesión
				</h3>
				<div class="form-group">
					<div class="input-group">
					  <span class="input-group-addon" id="email">
						<i class="fa fa-user"></i>
					  </span>
					  <input type="text" class="form-control" placeholder="Correo" aria-describedby="email" v-model="email" v-on:keyup.enter="$('#passW').focus();" autofocus>
					</div>
				</div>
				<div class="form-group">
					<div class="input-group">
					  <span class="input-group-addon" id="pass">
					  	<i class="fa fa-lock"></i>
					  </span>
					  <input type="password" class="form-control" placeholder="Contraseña" aria-describedby="pass" v-on:keyup.enter="login" v-model="password" id="passW">
					</div>
				</div>
				<div class="form-group">
					<button :disabled="loading" class="btn btn-primary pull-right" v-on:click="login()">
						Entrar
					</button>
				</div>
			</div>
		</div>
	</div>
	<div style="display:none" id="loanTemplate">
		<div id="loan" :listing-id="init">
			<div class="col-xs-12 col-sm-4">
				<div class="well container-fluid">
					<h4>
						Usuario 
					</h4>
					<div>
						<div class="input-group" v-bind:class="'has-'+[searchUser.state]">
							<span class="input-group-addon" id="user">
								<i class="fa fa-user"></i>
							</span>
							<input autofocus type="text" v-model.trim="user.identification" v-on:keyup="user.identification = user.identification.toUpperCase()" id="identification" class="form-control" placeholder="Carné/Cédula" aria-describedby="user"  v-on:keyup="(searchUser.state != 'default')?searchUser.state = 'default':''" v-on:keyup.enter="getUserData" :disabled="searchUser.disabled">
							<span class="input-group-addon" v-if="searchUser.state == 'default'">
								<i class="fa fa-search"></i>
							</span>
							<span class="input-group-addon" v-if="searchUser.state == 'success'">
								<i class="fa fa-check"></i>
							</span>
							<span class="input-group-addon" v-if="searchUser.state == 'warning'">
								<i class="fa fa-circle-o-notch fa-spin" ></i>
							</span>
							<span class="input-group-addon" v-if="searchUser.state == 'error'">
								<i class="fa fa-times text-danger" ></i>
							</span>
						</div>
					</div>
					<div class="row"> 
						<div class="col-xs-12">
							<div class="btn-group pull-right" style="margin-top: 10px;margin-bottom: 10px;">
								<button class="btn btn-default" v-on:click="clearUser()" :disabled="searchUser.disabled">
									Limpiar
								</button>
								<button class="btn btn-primary" v-on:click="getUserData()" :disabled="searchUser.disabled">
									Buscar
								</button>
							</div>
						</div>
					</div>
					<div v-if="user.id == null" style="font-size: 25px;border: 1px solid #999;border-radius: 6px;" class="text-muted text-center"><i style="font-size: 4em;" class="fa fa-user text-muted"></i> <br>
						Sin usuario seleccionado
					</div>
					<ul v-if="user.id != null" class="list-group">
						<li class="list-group-item">
							<b class="text-primary">Nombre:</b>
							<router-link :to="{ name: 'usuario', params: { id: user.id }}">
								{{user.name}} {{user.last_name}} <i class="fa fa-external-link"></i>
							</router-link>
						</li>
						<li class="list-group-item" v-if="user.student != null">
							<b class="text-primary">Carné:</b> {{user.student.license}}
						</li>
						<li class="list-group-item">
							<b class="text-primary">Cedula:</b> {{user.identity_card}}
						</li>
						<li class="list-group-item bg-danger" style="color: #fff; font-size: 14pt; background:#ff0000" v-if="user.penality != '0000-00-00'">
							<b>
								Multa de tiempo hasta:
							</b>  
							<br>
							El {{moment(user.penality).format('dddd DD [de] MMMM [del] YYYY')}}
						</li>
					</ul>
				</div>
			</div>
				
			<div class="col-xs-12 col-sm-8">
				<div class="well container-fluid">
	
					<h4>Préstamo</h4>
					<div class="row">
						<div class="col-xs-12 col-sm-3">
							<label for="loan_type">Tipo de prestamo</label>
							<select class="form-control" id="loan_type" v-model="auto" v-bind:disabled="user.id == null">
								<option value="true">Automático</option>
								<option value="false">Manual</option>
							</select>
						</div>
						<div class="col-xs-12 col-sm-3">
							<label for="">
								Fecha de devolución
							</label>
							<input type="text" class="form-control" placeholder="Fecha de devolución" aria-describedby="date" id="datePicker" :disabled="auto=='true'" v-model="return_time">
							
						</div>
						<div class="col-xs-12 col-sm-3">
							<label for="return_hour">
								Hora de devolución
							</label>
							<select v-model="return_hour" id="return_hour" class="form-control" placeholder="Hora de devolución" aria-describedby="time" :disabled="auto=='true'">
								<template v-for="n in hours()">
									<option v-bind:value="n.militar">
										{{n.civil}}
									</option>
								</template>
							</select>
						</div>
						<div class="col-xs-12 col-sm-3">
							<label for="barcode">
								Código de barras
							</label>
							<input type="text" class="form-control" id="barcode" placeholder="Código de barras" aria-describedby="barcode" v-model.trim="barcode" barcode = barcode.toUpperCase() v-on:keyup.enter="createLoan" :disabled="loan.disabled">
						</div>
					</div>	
					<div class="row">
						<div class="col-xs-12">
							<button v-on:click="createLoan" style="margin-top: 10px;" class="btn btn-primary pull-right" :disabled="loan.disabled">
								Préstamo/Devolución
							</button>
						</div>
					</div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading">
						Préstamos actuales
					</div>
					<div class="panel-body">
						<div v-if="currentLoans.length != 0">
							<div class="input-group col-xs-12 col-md-5">
								<span class="input-group-addon" >Ver tiempo</span>
								<select v-model="textTime" class="form-control">
									<option v-bind:value="true">
										Como texto
									</option>
									<option v-bind:value="false">
										En formato estandar
									</option>
								</select>
							</div>
							<table class="table table-hover">
								<thead>
									<tr>
										<th>Código</th>
										<th>Elemento</th>
										<th>Prestado</th>
										<th>Devolver</th>
										<th class="text-center">A tiempo</th>
										<th></th>
									</tr>
								</thead>
								<tbody> 
									<template v-for="loan in currentLoans">
										<tr >
											<td>
												<router-link :to="{name:'activo', params:{id:loan.loanable.id}}">
													{{loan.loanable.barcode}}
												</router-link>
											</td>
											<td v-if="loan.loanable.specification_type == 'App\\AudiovisualEquipment'" style="max-width:300px">
												<router-link :to="{name:'activo', params:{id:loan.loanable.id}}">
													<i class="fa fa-laptop"></i>
													<b>{{loan.loanable.specific.type.name}}</b> - {{loan.loanable.specific.brand.name}} - {{loan.loanable.specific.model.name}}
												</router-link>
											</td>
											<td v-if="loan.loanable.specification_type == 'App\\BibliographicMaterial'" style="max-width:300px">
												<router-link :to="{name:'activo', params:{id:loan.loanable.id}}">	
													<div v-if="loan.loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
														<i class="fa fa-certificate"></i>
														<b>{{loan.loanable.specific.title}}</b> - {{loan.loanable.specific.material.physical_description}} - <i>{{loan.loanable.specific.editorial.name}}</i>
													</div>
													<div v-if="loan.loanable.specific.material_type == 'App\\Book'">
														<i class="fa fa-book"></i>
														<b>{{loan.loanable.specific.title}}</b> - <i>{{loan.loanable.specific.editorial.name}}</i>
													</div>
													<div v-if="loan.loanable.specific.material_type == 'App\\CartographicMaterial'">
														<i class="fa fa-map-o"></i>
														<b>{{loan.loanable.specific.title}}</b> - <i>{{loan.loanable.specific.editorial.name}}</i> - {{loan.loanable.specific.material.dimension}}
													</div>
													<div v-if="loan.loanable.specific.material_type == 'App\\AudiovisualMaterial'">
														<i class="fa fa-file-video-o"></i>
														<b>{{loan.loanable.specific.title}}</b> - <i>{{loan.loanable.specific.editorial.name}}</i>
													</div>
												</router-link>	
											</td>
											<td v-if="loan.loanable.specification_type == 'App\\CopyPeriodicPublication'" style="max-width:300px">
												<router-link :to="{name:'activo', params:{id:loan.loanable.id}}">
													<i class="fa fa-newspaper-o"></i>
													<b>{{loan.loanable.specific.periodic_publication.title}}</b> no.{{loan.loanable.specific.number}} vol.{{loan.loanable.specific.volume}}
												</router-link>
											</td>
											<td v-if="textTime">
												{{ moment(loan.departure_time).calendar()}}
											</td>
											<td v-else>
												{{ moment(loan.departure_time).format('D/MM/YYYY h:mm a')}}
											</td>
											<td v-if="textTime">
												{{ moment(loan.return_time).calendar()}}
											</td>
											<td v-else>
												{{ moment(loan.return_time).format('D/MM/YYYY h:mm a')}}
											</td>
											<td v-if="date > loan.return_time" class="text-center text-danger">
												No <i class="fa fa-times-circle-o" style="font-size: 1.3em;"></i>
											</td>
											<td v-else class="text-center text-success">
												Sí <i class="fa fa-check-circle-o" style="font-size: 1.3em;"></i>
											</td>
											<td>
												<button class="btn btn-primary btn-xs" v-on:click="returns(loan.loanable.barcode)">
													Devolver
												</button>
											</td>
										</tr>
									</template>
								</tbody> 
							</table>
						</div>
						<div v-if="currentLoans.length == 0" style="font-size: 25px;border: 1px solid #999;border-radius: 6px;" class="text-muted text-center">
							<i class="fa fa-tag" style="font-size: 4em"></i>
							<br>
							No se registran préstamos
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	<div style="display:none" id="statisticsTemplate"  :listing-id="statistics_panel">
		<div class="col-xs-12 col-sm-6">
			<div class="well container-fluid">
			<h4>Criterios de consulta para estadísticas</h4>
			</br>
				<div class="row">
					<div class="col-xs-12 col-sm-4">
						<label for="select_av">Tipo de audiovisual:</label>
							<select name="" id="select_av" class="form-control" v-model="statistics_data">
								<option value="" disabled selected="selected">Nombre</option>
								<template v-for="type in types">
									<option v-bind:value="type.id">{{type.name}}</option>
								</template>
							</select>
					</div> 
					</br></br></br></br>
					<h4>Consultar por rango de fechas</h4>
					<div class="col-xs-12 col-sm-3">
						<label for="date1_stats">Desde:</label>
						<input type="text" placeholder="Fecha Inicial" aria-describedby="date" id="date1_stats" enable="enable" class="form-control" v-model="date1_stats">
					</div>
					
					<div class="col-xs-12 col-sm-3">
						<label for="date2_stats">Hasta:</label>
						<input type="text" placeholder="Fecha Final" aria-describedby="date" id="date2_stats" enable="enable" class="form-control" v-model="date2_stats">
					</div>
					<button style="margin-top: 25px;" class="btn btn-primary pull-left" v-on:click="createStats()">
							Consultar
					</button>
				</div> 
				
				<br/> <br/> 
				
					<div class="row">
						<div class="col-xs-12 col-sm-4">
							<label for="cant_prest">Cantidad de prestamos del activo:</label>
							<input id="cant_prest" v-model="cant_prestv" placeholder="0" aria-describedby="text" readonly class="form-control">
						</div>
							
					</div>
					<br/>
					
					<div class="row">
						<div class="col-xs-12 col-sm-4">
							<label for="cant_pend">Devoluciones retrasadas del activo:</label>
							<input id="cant_pend" v-model="cant_pendv" placeholder="0" aria-describedby="text" readonly class="form-control">
						</div>
					</div>
					
			</div>
			<!--<div class="col-xs-12 col-sm-8" >
					<div class="well container-fluid>
						<div>
							<label for="_anno">Durante el año:</label>
							<input id="_anno" v-model="yearAmountLoans" placeholder="Año" aria-describedby="text" readonly class="form-control">
						</div>
						
						<div class="col-xs-12 col-sm-4">
							<label for="_mes">Durante el mes:</label>
							<input id="_mes"v-model="monthAmountLoans" placeholder="Mes" aria-describedby="text" readonly class="form-control">
						</div>
						<div class="col-xs-12 col-sm-4">
						<label for="_dia">Durante el día:</label>
							<input id="_dia"v-model="dayAmountLoans" placeholder="Día" aria-describedby="text" readonly class="form-control">
						</div>
					</div>
				</div>
		</div>-->		
			
	</div>
	</div>
	<div style="display:none" id="allUsersManagementTemplate">
		<div class="col-xs-12 col-sm-10 col-sm-offset-1" :listing-id="users_managment"> 
			<div class="well">
				<h2>
					<i class="fa fa-users"></i>
					Personas
				</h2>
				<div class="input-group">
					<input type="text" placeholder="Buscar" class="form-control">
					<span class="input-group-btn">
						<button type="button" class="btn btn-default">
							<i class="fa fa-times"></i>
						</button>
						<button type="button" class="btn btn-info"><i class="fa fa-search"></i>
							Buscar
						</button>
					</span>
				</div>
			</div>
			<div class="well container-fluid">
			
					<router-link  class="btn btn-primary pull-right" :to="{ name: 'usuario', params: { id: 'nuevo' }}">
						<i class="fa fa-user-plus"></i> Agregar persona
					</router-link>
					
					<div v-if="!(page.data && page.data.length > 0)" class="text-center bg-warning col-xs-12 text-warning" style="margin-top:10px; font-size: 25px;border: 1px solid #999;border-radius: 6px;">
						<span class="fa-stack fa-lg text-warning" style="font-size: 3.5em;" >
						  <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw fa-stack-2x text-warning"></i>
						  <i class="fa fa-users fa-stack-1x text-warning"></i>
						</span>
						<br>
						<p>Cargando ...</p>
					</div>
				<span class="text-muted" v-if="page.data && page.data.length > 0">
					Página {{$route.params.page}} de {{page.last_page}}
				</span>
				<nav aria-label="Page navigation" v-if="page.data && page.data.length > 0">
				  <ul class="pagination">
				    <li>
				      	<router-link  :to="{ name: 'personas', params: { page: 1 }}" aria-label="Previous">
				        	<span>&laquo;</span>
						</router-link>
				    </li>
				    <template v-for="index in page.last_page">
					    <li >
				 	    	<router-link  :to="{ name: 'personas', params: { page: index }}">
								{{index}}
							</router-link> 
					    </li>
				    </template>
				    <li>
				    	<router-link  :to="{ name: 'personas', params: { page: page.last_page }}"  aria-label="Next">
							<span>&raquo;</span>
						</router-link> 
				    </li>
				  </ul>
				</nav>
				<table class="table table-striped" v-if="page.data && page.data.length > 0">
					<thead>
						<tr>
							<th>
								
							</th>
							<th>
								Identificación
							</th>
							<th>
								Nombre 
							</th>
							<th>
								Apellidos
							</th>
							<th>
								Estado
							</th>
							<th>
								Rol
							</th>
							<th>
								Datos
							</th>
						</tr>
					</thead>
					<tbody>
						<template v-for="singleUser in page.data" >
							<tr class="v-aling-center">
								<td class="v-aling-center">
									<img 
										v-bind:src="(singleUser.photos.length > 0)?imgDir+(singleUser.photos[0]).path:imgDir+defaultUserImg"
										v-bind:alt="'Imagen de ' + singleUser.name"
										class="img-circle"
										style="width: 35px;"
									>
								</td>
								<td class="v-aling-center">
									<router-link  :to="{ name: 'usuario', params: { id: singleUser.id }}">
										{{singleUser.identity_card}}
									</router-link>
								</td>
								<td class="v-aling-center">
									<router-link  :to="{ name: 'usuario', params: { id: singleUser.id }}">
										{{singleUser.name}}
									</router-link>
								</td>
								<td class="v-aling-center">
									<router-link  :to="{ name: 'usuario', params: { id: singleUser.id }}">
										{{singleUser.last_name}}
									</router-link>
								</td>
								<td class="v-aling-center">
									{{(singleUser.active)?"Activo":"Inactivo"}}
								</td>
								<td class="v-aling-center">
									{{singleUser.role.type}}
								</td>
								<td v-if="singleUser.next_update_time > (new Date()).sqlFormat()" class="text-success">
									<i class="fa fa-check-circle-o"></i> Actualizados
								</td>
								<td v-if="!(singleUser.next_update_time > (new Date()).sqlFormat())" class="text-danger">
									<i class="fa fa-times-circle-o"></i> Desactualizados
								</td>
								<td class="v-aling-center">
									<router-link  :to="{ name: 'usuario', params: { id: singleUser.id }}" class="btn btn-primary btn-xs">
										<i class="fa fa-eye"></i>
										Ver
									</router-link>
									<button class="btn btn-danger btn-xs">
										<i class="fa fa-trash-o"></i>
										Borrar
									</button>
								</td>
							</tr>
						</template>
					<tbody>
				</table>
				<span class="text-muted" v-if="page.data && page.data.length > 0">
					Resultados desde {{page.from}} hasta {{page.to}}
				</span>
				<nav aria-label="Page navigation" v-if="page.data && page.data.length > 0">
				  <ul class="pagination">
				    <li>
				      	<router-link  :to="{ name: 'personas', params: { page: 1 }}" aria-label="Previous">
				        	<span>&laquo;</span>
						</router-link>
				    </li>
				    <template v-for="index in page.last_page">
					    <li >
				 	    	<router-link  :to="{ name: 'personas', params: { page: index }}">
								{{index}}
							</router-link> 
					    </li>
				    </template>
				    <li>
				    	<router-link  :to="{ name: 'personas', params: { page: page.last_page }}"  aria-label="Next">
							<span>&raquo;</span>
						</router-link> 
				    </li>
				  </ul>
				</nav>
			</div>
		</div>	
	</div>
	<div style="display:none" id="singleUserTemplate" :listing-id="single_user_panel">
		<div class="">
			<div class="col-xs-12 col-sm-6">
				<div class="panel panel-default shadow" v-bind:class="{'panel-success':user_data.next_update_time > date.sqlFormat(), 'panel-danger':user_data.next_update_time <= date.sqlFormat()}">
					<div class="panel-heading">
						<h3 class="panel-title" style="display: inline-block;">
							Resumen 
						</h3>
						<small>
							<span v-if="user_data.next_update_time > date.sqlFormat()">
								(Datos actualizados <i class="fa fa-check-circle-o"></i>)
							</span>
							<span v-else>
								(Datos desactualizados <i class="fa fa-times-circle-o"></i>)
							</span>
						</small>
					</div>
					<div class="panel-body">
						<div class="row">
							<div class="col-xs-4">
								<div>
									<button class="btn btn-sm btn-default" :disabled="!user_data.id" style="position: absolute;right: 25px;bottom: 10px;"><i class="fa fa-camera" aria-hidden="true"></i></button>
									<img 
										v-bind:src="(user_data.photos && user_data.photos.length > 0)?imgDir+(user_data.photos[0]).path:imgDir+defaultUserImg"
										v-bind:alt="'Imagen de ' + user_data.name"
										class="img-thumbnail"
									>
								</div>
							</div>
							<div class="col-xs-8">
								<h3>
									<span>{{user_data.name}} {{user_data.last_name}}</span>
									<i v-if="(user_data.name == null || user_data.name == '') && (user_data.last_name == null ||user_data.last_name == '')" class="text-muted">Sin nombre</i>
									<br>
									<small class="unselectable">
										<label class="label label-default" v-bind:class="{'label-success' : user_data.active}">
											Activo <i class="fa fa-check-square-o" v-if="user_data.active"></i>
											<i class="fa fa-square-o" v-if="!user_data.active"></i>
											<input type="checkbox" id="active"  v-model="user_data.active" style="display:none"/>
										</label>
									</small>
								</h3>
								<p>
									<i class="fa fa-id-card-o"></i> Cédula: <i class="text-muted" v-if="user_data.identity_card == ''">Sin cédula registrada</i> <b>{{user_data.identity_card}}</b>
								</p>
								<p v-if="isStudent">
									<i class="fa fa-address-card"></i> Carné: <i class="text-muted" v-if="user_data.student.license == ''">Sin carné registrado</i><b>{{user_data.student.license}}</b>
								</p>
								<p v-if="user_data.role">
									<i class="fa fa-cog"></i> Rol: <b>{{user_data.role.type}}</b>
								</p>
								<p v-else class="text-muted">
									<i class="fa fa-cog"></i> <i>Sin rol asignado</i>
								</p>
								<button class="btn btn-warning pull-right btn-sm" v-if="user_data.role.id != 3">
									<i class="fa fa-lock"></i> Generar contraseña
								</button>
							</div>
						</div>
					</div>
				</div>
				<div class="well container-fluid">
					<div class="col-xs-12">
						<div class="form-group" v-bind:class="{'has-success':user_data.next_update_time > date.sqlFormat(), 'has-error':user_data.next_update_time <= date.sqlFormat()}">
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									<i class="fa fa-calendar"></i> Próxima actualizacion
								</span>
								<input id="datePickerAll" type="text" id="next_update_time" placeholder="Fecha de próxima actualizacion" aria-describedby="date" enable="enable" class="form-control" v-model="moment(user_data.next_update_time + ' 00:00:00').format('DD [de] MMMM [del] YYYY')">
								<span class="input-group-btn">
							        <button class="btn" type="button" v-bind:class="{'btn-success':user_data.next_update_time > date.sqlFormat(), 'btn-danger':user_data.next_update_time <= date.sqlFormat()}" v-on:click="setSuggestedUpdateTime()">Fecha sugerida</button>
							    </span>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="name">Nombre</label>
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									<i class="fa fa-user" ></i>
								</span>
								<input autofocus="autofocus" id="name" type="text" placeholder="Nombre" v-model="user_data.name" aria-describedby="user" class="form-control">
							</div>
						</div>
					</div>	
					 <div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="last_name">Apellidos</label>
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									<i class="fa fa-user" ></i>
								</span>
								<input autofocus="autofocus" id="last_name" type="text" v-model="user_data.last_name" placeholder="Apellidos" aria-describedby="user" class="form-control">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6" v-if="roles.length > 0">
						<div class="form-group">
							<label for="roll">Rol</label>
							<div class="input-group has-default">				
								<span class="input-group-addon" id="user">
									<i class="fa fa-cog"></i>
								</span> 
								<select class="form-control" v-model="user_data.role" id="roll">
									<template v-for="roll in roles">
										<option v-bind:value="roll">
											{{roll.type}}
										</option>
									</template>
								</select>
							</div>
						</div>
					</div>
					 <div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="last_name">Carné</label>
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									Estudiante <input type="checkbox" v-model="isStudent" name="">
								</span>
								<input :disabled="!isStudent" autofocus="autofocus" id="last_name" type="text" v-model="user_data.student.license" placeholder="Carné" aria-describedby="user" class="form-control">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="identity_card">Cédula</label>
							<div class="input-group has-default">				
								<span class="input-group-addon" id="user">
									<i class="fa fa-id-card-o"></i>
								</span> 
								<input class="form-control" id="identity_card" v-model="user_data.identity_card" aria-describedby="user" placeholder="Cédula" autofocus="autofocus" type="text">
							</div>
						</div>
					</div>	
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="email">Correo electrónico</label>
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									<i class="fa fa-envelope-o"></i>
								</span>
								<input autofocus="autofocus" id="email" v-model="user_data.email" type="text" placeholder="Correo electrónico" aria-describedby="user" class="form-control">
							</div>
						</div>
					</div>
					
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="home_phone">Teléfono de habitación</label>
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									<i class="fa fa-phone"></i>
								</span>
								<input autofocus="autofocus" id="home_phone" type="text" v-model="user_data.home_phone" placeholder="Teléfono de habitación" aria-describedby="user" class="form-control">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="cell_phone">Teléfono celular</label>
							<div class="input-group has-default">
								<span id="user" class="input-group-addon">
									<i class="fa fa-mobile"></i>
								</span>
								<input autofocus="autofocus" id="cell_phone" v-model="user_data.cell_phone" type="text" placeholder="Teléfono celular" aria-describedby="user" class="form-control">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="province">Provincia</label>
							<div class="input-group has-default">
								<span class="input-group-addon">
									<i class="fa fa-globe"></i>
								</span>
								<select v-model="province_data" class="form-control">
									<template v-for="province in provinces">
										<option v-bind:value="province">
											{{province.name}}
										</option>
									</template>
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="canton">Cantón</label>
							<div class="input-group has-default">
								<span class="input-group-addon">
									<i class="fa fa-globe"></i>
								</span>
								<select v-model="canton_data" class="form-control">
									<template v-for="canton in cantons_current_province">
										<option v-bind:value="canton">
											{{canton.name}}
										</option>
									</template>
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-md-6">
						<div class="form-group">
							<label for="district">Distrito</label>
							<div class="input-group has-default">
								<span class="input-group-addon">
									<i class="fa fa-globe"></i>
								</span>
								<select v-model="district_data" class="form-control">
									<template v-for="district in districts_current_canton">
										<option v-bind:value="district">
											{{district.name}}
										</option>
									</template>
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12">
						<div class="form-group">
							<label for="exact_address">Dirección Exacta</label>
							<textarea placeholder="Dirección Exacta" v-model="user_data.direction" class="form-control" style="resize: none;">
							</textarea>
						</div>
					</div>
					
					<button class= "btn btn-primary pull-right" v-on:click= "save()"><i class="fa fa-floppy-o"></i> Guardar</button>
					<!--<div class="col-xs-12 col-md-6">
							<select name="" id="" class="form-control"  v-model="audiovisual_data.brand.name">
								<option value="" disabled selected="selected">Rol</option>
								<template v-for="role in roles">
									<option> <!--{{role.name}}-- </option>
								</template>
							</select>
						
					</div>
					<div class="col-xs-12">
					<button style="margin-top: 10px;" class="btn btn-primary pull-right">
						<i class="fa fa-floppy-o"></i> Guardar
					</button></div>-->
				</div>
			</div>
			<div class="col-xs-12 col-sm-6">
				<div class="panel panel-primary shadow">
					<div class="panel-heading">
						<h3 class="panel-title">
							<i aria-hidden="true" class="fa fa-history"></i>
							Historial de prestamos
						</h3>
					</div>
					<div class="panel-body" v-if="!user_data.loans || user_data.loans.length == 0">
						<div style="font-size: 25px;border: 1px solid #999;border-radius: 6px;" class="text-muted text-center"><i style="font-size: 4em" class="fa fa-tag"></i> <br>
							No se registran préstamos
						</div>
					</div>
					<table class="table table-hover" v-else>
						<thead>
							<tr>
								<th>
									Prestamo
								</th>
								<th>
									Código
								</th>
								<th>
									Solicitado
								</th>
								<th>
									Devuelto
								</th>
								<th>
									Multa
								</th>
								<th>
									
								</th>
							</tr>
						</thead>
						<tbody>
							<tr v-for="loan in user_data.loans">
								<td>
									{{loan.id}}
								</td>
								<td>
									{{loan.loanable.barcode}}
								</td>
								<td>
									{{moment(loan.departure_time).calendar()}}
								</td>
								<td v-if="loan.user_return_time != '0000-00-00 00:00:00'">
									{{moment(loan.user_return_time).calendar()}}
								</td>
								<td v-else>
									En curso
								</td>
								<td>
									{{loan.penalty != null}}
								</td>
								<td>
									<router-link  :to="{ name: 'prestamo', params: { id: loan.id }}" aria-label="Previous" class="btn btn-success btn-xs pull-right">
							        	<span class="fa fa-info-circle"></span>
										Detalles
									</router-link>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="panel panel-danger shadow">
					<div class="panel-heading">
						<h3 class="panel-title">
							<i aria-hidden="true" class="fa fa-history"></i>
							Historial de multas
						</h3>
					</div>
					<div class="panel-body text-muted" v-if="!user_data.penalties || user_data.penalties.length == 0">
						<div style="font-size: 25px;border: 1px solid #999;border-radius: 6px;" class="text-muted text-center">
							<i style="font-size: 4em;" class="fa fa-ban text-muted"></i> 
							<br>
							Usuario sin multas
						</div>
					</div>
					<table class="table table-hover" v-else>
						<thead>
							<tr>
								<th>
									Prestamo
								</th>
								<th>
									Horas tarde
								</th>
								<th>
									Finalización
								</th>
								<th>
									
								</th>
							</tr>
						</thead>
						<tbody>
							<tr v-for="penalty in user_data.penalties">
								<td>
									{{penalty.loan.id}}
								</td>
								<td>
									
								</td>
								<td>
									{{penalty.penalty_time_finish}}
								</td>
								<td>
									detalles
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<!--<div class="col-xs-12 col-sm-6">
				<div class="well container-fluid"> 
					<div class="col-xs-12">
						<h3 class="text-danger">
							Multas
						</h3>
						<div id="penalty" v-if="!user_data.penalties || user_data.penalties.length <= 0" class="col-xs-12 col-sm-4  bg-danger" style="font-size: 25px;border: 1px solid #999;border-radius: 6px;" class="text-muted text-center"><i style="font-size: 3em;" i class="fa fa-ban" ></i><br>
							El usuario no posee multas
						</div>
						<div v-if="!(!user_data.penalties || user_data.penalties.length <= 0)">
							<table class="table table-striped">
								<thead>
									<tr>
										<th>
											
										</th>
										<th>
											Horas tarde
										</th>
										<th>
											Finaliza
										</th>
										<th>
											Estado
										</th>
										<th>
											Equipo
										</th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="penalty in user_data.penalties" v-bind:class="{'danger text-danger':(date.sqlFormat() <= penalty.penalty_time_finish)}">
										<td>
											<div class="btn-group">
											  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
											    Acción <span class="caret"></span>
											  </button>
											  <ul class="dropdown-menu">
											    <li><a href="#">Ver detalles</a></li>
											    <li><a href="#">Eliminar</a></li>
											  </ul>
											</div>
										</td>
										<td class="text-center">
											<b>
												{{Math.trunc(Math.abs(sqlToJavaScriptDate(penalty.loan.return_time) - sqlToJavaScriptDate(penalty.loan.user_return_time)) / 36e5) }} hora{{Math.trunc(Math.abs(sqlToJavaScriptDate(penalty.loan.return_time) - sqlToJavaScriptDate(penalty.loan.user_return_time)) / 36e5)>1?"s":"" }}
											</b>
										</td>
										<td>
											{{penalty.penalty_time_finish}}
										</td>
										<td>
											{{((new Date()).sqlFormat()> penalty.penalty_time_finish)?"Finalizada":"En ejecución" }}
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>-->
		</div>
	</div>
	<div style="display:none" id="audiovisualMaterialManagementTemplate">
		<div class="col-xs-12 col-sm-10 col-sm-offset-1" :listing-id="audiovisual_material_management"> 
			<div class="well">
				<h3>
					Materiales Audiovisuales 
					{{page.data}}
				</h3>
				<!--
					<div class="input-group pull-right">
					  <input type="text" class="form-control" placeholder="Busqueda"/>
					  <span class="input-group-addon" id="email">
						<i class="fa fa-search"></i>
					  </span>
					</div>
					<br><br>
					<button class= "btn btn-primary pull-right">Buscar</button><br>
				-->	
				 <!--<span class="text-muted" >
					Página {{$route.params.page}} de {{page.last_page}}
				</span> -->
				<table class="table table-striped" >
				<thead>
					<tr>
						<th>
							Código de barras
						</th>
						<th>
							Tipo 
						</th>
						<th>
							Formato 
						</th>
					</tr>
				</thead>
				<tbody>
						<template v-for="material in page.data" >
						{{page.data}}
								<td>
									<router-link  :to="{ name: 'material-audiovisual-panel', params: { id: audiovisual-material.id }}">
									<!--	{{material.loanable.barcode}} -->
									</router-link>
								</td>
								<td>
									<!-- <router-link  :to="{ name: 'material-audiovisual-panel', params: { id: audiovisual-material.id }}"> -->
										<!--{{material.audiovisual_material_type.name}} -->
									<!-- </router-link> -->
								</td>
								<td>
									<!-- {{material.audiovisual_format.name}} -->
								</td>
							</tr>
						</template>
					</tbody>
				</table>
				<span class="text-muted">
					Resultados desde {{page.from}} hasta {{page.to}}
				</span>
				<nav aria-label="Page navigation">
				  <ul class="pagination">
				    <li>
				      	<router-link  :to="{ name: 'material-audiovisual', params: { page: 1 }}" aria-label="Previous">
				        	<span>&laquo;</span>
						</router-link>
				    </li>
				    <template v-for="index in page.last_page">
					    <li >
					    	<router-link  :to="{ name: 'material-audiovisual', params: { page: index }}">
								{{index}}
							</router-link>
					    </li>
				    </template>
				    <li>
				    	<router-link  :to="{ name: 'material-audiovisual', params: { page: page.last_page }}"  aria-label="Next">
							<span>&raquo;</span>
						</router-link>
				    </li>
				  </ul>
				</nav>
			</div>
		</div><!--ERROR PAGE -->
	</div>
	<div style="display:none" id="threeDimensionalObjectManagementTemplate">
			<div class="col-xs-12 col-sm-10 col-sm-offset-1" :listing-id="three_dimensional_management">
				<div class="well">
					<h3>
						Objeto Tridimensional
					</h3>
				<!--
					<div class="input-group pull-right">
						<input type="text" class="form-control" placeholder="Busqueda"/>
						<span class="input-group-addon" id="email">
							<i class="fa fa-search"></i>
					  </span>
					</div>
						<br><br>
						<button class= "btn btn-primary pull-right">Buscar</button><br>
				-->		
					<span class="text-muted" >
							Página {{$route.params.id}} de {{three_dimensional_data.last_page}}
					</span>
				<table class="table table-striped">
						
						<thead>
							<tr>
								<th>
									Descripción
								</th>
								<th>
									Signatura 
								</th>
								<th>
									Lugar publicación
								</th>
								<th>
									Editorial
								</th>
							</tr>
						</thead>
					<tbody>
						<template v-for="threeDimOb_item in three_dimensional_data.data" >
							<tr>
								<td>
									<router-link  :to="{ name: 'three_dimensional_data', params: { id: three_dimensional_data.id }}">
										<!--{{threeDimOb_item.physical_description}} -->
									</router-link>
								</td>
								<td>
									<router-link  :to="{ name: 'three_dimensional_data', params: { id: three_dimensional_data.id }}">
									<!--	{{threeDimOb_item.bibliographic_material.signature}} -->
									</router-link>
								</td>
								<td>
								<!--	{{threeDimOb_item.bibliographic_material.publication_place}} -->
								</td>
								
								<td>
									<!--{{threeDimOb_item.bibliographic_material.editorial.name}} -->
								</td>
								<td>
									<!--{{threeDimOb_item}} -->
								</td>
							</tr>
						</template>
					</tbody>
				</table>
				
				<span class="text-muted">
				
					Resultados desde {{three_dimensional_data.from}} hasta {{three_dimensional_data.to}}
				</span>
				<nav aria-label="Page navigation">
				  <ul class="pagination">
				    <li>
				      	<router-link  :to="{ name: 'objeto-tridimensional', params: { id: 1 }}" aria-label="Previous">
				        	<span>&laquo;</span>
						</router-link>
				    </li>
				    <template v-for="index in three_dimensional_data.last_page">
					    <li >
					    	<router-link  :to="{ name: 'objeto-tridimensional', params: { id: index }}">
								{{index}}
							</router-link>
					    </li>
				    </template>
				    <li>
				    	<router-link  :to="{ name: 'objeto-tridimensional-panel', params: { id: three_dimensional_data.last_page }}"  aria-label="Next">
							<span>&raquo;</span>
						</router-link>
				    </li>
				  </ul>
				</nav>
			</div>
		</div><!--ERROR PAGE -->
	</div>
	<div style="display:none" id="audiovisualEquipmentPanelTemplate">
	 <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2"  :listing-id="cartographic_panel">
		<div class="well row">
			<h3>
				Panel de equipo
			</h3>
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						<i class="fa fa-barcode"></i>
					</span>
					<input autofocus="autofocus" type="text" placeholder="Signatura" <!--aria-describedby="user"--> class="form-control" v-model="audiovisual_data.loanable.barcode">
				</div>
			</div>
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<select name="" id="" class="form-control" v-model="audiovisual_data.type">
						<option value="" disabled selected="selected">Nombre</option>
						<template v-for="type in types">
							<option v-bind:value="type">{{type.name}}</option>
						</template>
						
					</select>
					<span id="user" class="input-group-addon">
						Nuevo <input type="checkbox" />
					</span>
				</div>
			</div>	
			<br /> <br /> <br />
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						Nuevo <input type="checkbox" />
					</span>
					<select name="" id="" class="form-control"  v-model="audiovisual_data.brand">
						<option value="" disabled selected="selected">Marca</option>
						<option v-for="brand in brands" v-bind:value="brand">{{brand.name}}</option>
					</select>
				</div>
			</div>
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<select name="" id="" class="form-control" v-model="audiovisual_data.model">
						<option value="" disabled selected="selected">Modelo</option>
						<option v-for="model in models" v-bind:value="model">{{model.name}}</option>
					</select>
					<span id="user" class="input-group-addon">
						Nuevo <input type="checkbox" />
					</span>
				</div>
			</div>	
			<br /> <br /> <br />	
			<div class="col-xs-12 col-md-6">
				<select name="" v-model="audiovisual_data.loanable.state" class="form-control">
					<option value="" disabled selected="selected">Estado</option>
					<option v-for="state in states" v-bind:value="state">{{state.description}}</option>
				</select>
			</div>	
			<br /> <br /> <br />	
			<div class="col-xs-12">
				<textarea name="" id="" cols="30" rows="10" class="form-control" placeholder="Notas" style="resize:vertical" v-model="audiovisual_data.loanable.note"></textarea>
			</div>
			<br /> <br /> <br />	
			<div class="col-xs-12">
				
				<button style="margin-top: 10px;" class="btn btn-primary pull-right">
					<i class="fa fa-floppy-o"></i> Guardar
				</button>
				
			</div>
		</div>
	</div>
	</div>
	<div style="display:none" id="singleThreeDimensionalTemplate">
		<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2"  :listing-id="three_dimensional_panel">
		<div class="well row">
			<h3>
				Material Tridimensional
			</h3>
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						<i class="fa fa-barcode"></i>
					</span>
					<input autofocus="autofocus" type="text" placeholder="Código de barras" aria-describedby="user" class="form-control" v-model="three_dimensional_data.loanable.barcode">
				</div>
			</div>
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						<i ></i>
					</span>
					<input autofocus="autofocus" type="text" placeholder="Signatura" aria-describedby="user" class="form-control">
				</div>
			</div>	
			<br /> <br /> <br />
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						<i ></i>
					</span>
					<input autofocus="autofocus" type="text" placeholder="Año de publicación" aria-describedby="user" class="form-control">
				</div>
			</div>
			 <div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						<i ></i>
					</span>
					<input autofocus="autofocus" type="text" placeholder="Lugar de publicación" aria-describedby="user" class="form-control">
				</div>
			</div>             
			<br /> <br /> <br />
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						<i ></i>
					</span>
					<input autofocus="autofocus" type="text" placeholder="Descripción Física" aria-describedby="user" class="form-control">
				</div>
			</div> 
			<div class="col-xs-12 col-md-6">                
				<select name="" id="" class="form-control" v-model="three_dimensional_data">
					<option value="" disabled selected="selected">Estado</option>
					<option v-for="state in states" v.bind:value="state.id">{{state.name}}</option>
				</select>
			</div>				
			<br /> <br /> <br />
			<div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
				<span id="user" class="input-group-addon">
							Nuevo <input type="checkbox" />
				</span>
					<select name="" id="" class="form-control">
						<option value="" disabled selected="selected">Palabra Clave</option>
						<option v-for="state in states" value="{{state.id}}">Lista Palabra Clave</option>
					</select>
				</div>
			</div>
            <div class="col-xs-12 col-md-6">
				<div class="input-group has-default">
					<span id="user" class="input-group-addon">
						Nuevo <input type="checkbox" />
					</span>
					<select name="" id="" class="form-control">
						<option value="" disabled selected="selected">Editorial</option>
						<option v-for="state in states" value="{{state.id}}">Lista editoriales</option>
					</select>
				</div>
			</div>
			<br /> <br /> <br />
			<div class="col-xs-12">
				<textarea name="" id="" cols="10" rows="5" class="form-control" placeholder="Notas" style="resize:vertical" v-model="audiovisual_data.loanable.note"></textarea>
			</div>
			
			<br /> <br /> <br />	
			<div class="col-xs-12"><button style="margin-top: 10px;" class="btn btn-primary pull-right">
				<i class="fa fa-floppy-o"></i> Guardar
			</button></div>
		</div>
	</div>
	</div>
	<div style="display:none" id="searchTemplate">
		<div class="col-xs-12 col-sm-10 col-sm-offset-1">
			<div class="col-xs-12">
				<div class="well container-fluid">
					<div class="col-xs-12">
						<h1>
							Gestión
						</h1>
					</div>
					<div class="col-xs-12">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Buscar">
							<span class="input-group-btn">
								<button class="btn btn-default" type="button">
									<i class="fa fa-times"></i>
								</button>
								<button class="btn btn-info" type="button" v-on:click="search()">
									<i class="fa fa-search"></i>
									Buscar
								</button>
							</span>
						</div>
						<p>
							<b>Incluir tipos:</b>
							<br/>
							<label class="unselectable checkbox-inline" v-for="type in types" v-bind:class="{'text-muted': !type.include}">
								<input type="checkbox" v-model="type.include">
								{{type.name}}
							</label>
						</p>
					</div>
					<div class="col-xs-12">
						<div class="btn-group pull-right">
							<div class="btn-group ">
								<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<i class="fa fa-plus-square" aria-hidden="true"></i> Agregar activo <span class="caret"></span>
								</button>
								<ul class="dropdown-menu">
									<li>
										<a href="#/activo/nuevo.equipo">
											<i class="fa fa-laptop"></i> Equipo audiovisual
										</a>
									</li>
									<li>
										<a href="#/activo/nuevo.publicacion">
											<i class="fa fa-newspaper-o"></i> Publicación periódica
										</a>
									</li>
									<li>
										<a href="#/activo/nuevo.libro">
											<i class="fa fa-book"></i> Libro
										</a>
									</li>
									<li>
										<a href="#/activo/nuevo.cartografico">
											<i class="fa fa-map-o"></i> Material cartográfico
										</a>
									</li>
									<li>
										<a href="#/activo/nuevo.aduiovisual">
											<i class="fa fa-file-video-o"></i> Material audiovisual
										</a>
									</li>
									<li>
										<a href="#/activo/nuevo.tridimensional">
											<i class="fa fa-certificate"></i> Objeto tridimensional
										</a>
									</li>
								</ul>
							</div>
							<!--<button class="btn btn-default">
								<i class="fa fa-download" aria-hidden="true"></i> Importar .CSV
							</button>-->
						</div>
							
					</div>
				</div>
				<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
					<div class="panel panel-primary">
						<div class="panel-heading collapsed unselectable" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
							<h4 class="panel-title">
								<b>
									<i class="fa fa-plus-square"></i> Opciones avanzadas
								</b>
							</h4>
						</div>
						<div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
							<div class="panel-body">
								<div class="row">
									<div class="btn-group-vertical col-xs-12 col-sm-5 col-md-4">
										<button type="button" class="list-group-item active">
											<b>Incluir estados</b>
										</button>
										
										<label type="button" class="btn text-left list-group-item" style="text-align: left;" v-for="state in states" v-bind:class="{'text-muted': !state.include}">
											<span class="badge" v-bind:style="{background: state.color}">
												{{state.quantity}}
											</span>
											<input type="checkbox" v-model="state.include">
											{{state.name}}
										</label>
									</div>
									<div class="btn-group-vertical col-xs-12 col-sm-7 col-md-8">
										<label type="button" class="list-group-item active">
											<input type="checkbox">
											<b class="unselectable">Busqueda exclusiva de material bibliográfico</b>
										</label>
										<div class="input-group">
											<label class="input-group-addon">
												Título
											</label>
											<input type="text" class="form-control" placeholder="Escriba un título">
										</div>
										<div class="input-group">
											<label class="input-group-addon">
												Autor
											</label>
											<input type="text" class="form-control" placeholder="Escriba un autor (Nombre o apellido)">
										</div>
										<div class="input-group">
											<label class="input-group-addon">
												Código de barras
											</label>
											<input type="text" class="form-control" placeholder="Escriba un código de barras">
										</div>
										<div class="input-group">
											<label class="input-group-addon">
												Signatura
											</label>
											<input type="text" class="form-control" placeholder="Escriba un signatura">
										</div>
										<div class="input-group">
											<label class="input-group-addon">
												Palabras clave
											</label>
											<input type="text" class="form-control" placeholder="Escriba un palabras clave (separadas por comas)">
										</div>
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="container-fluid" style="margin-bottom: 15px;" v-if="paginate.data != null">
				<div class="row">
					<div class="col-xs-12 col-sm-9">
						<div class="btn-toolbar" role="toolbar">
							<div class="btn-group" role="group">
								<button class="btn btn-default">
									<i class="fa fa-angle-double-left"></i>
								</button>
								<button class="btn btn-default">
									<i class="fa fa-angle-left"></i>
								</button>
							</div>
							<div class="btn-group" role="group">
								<router-link :to="{ name: 'gestion', params: { page: (paginate.current_page >=1 )?((paginate.current_page-4)<1)?n:n+(paginate.current_page-4):1 }}" class="btn" v-for="n in (paginate.last_page >= 1)?((paginate.last_page < 7)?paginate.last_page:7):1" v-bind:class="{'btn-primary':(((paginate.current_page-4)<1)?n:n+(paginate.current_page-4))==paginate.current_page, 'btn-default':(((paginate.current_page-4)<1)?n:n+(paginate.current_page-4)!=paginate.current_page)}">
									{{ (paginate.current_page >=1 )?((paginate.current_page-4)<1)?n:n+(paginate.current_page-4):1 }}
								</router-link>
							</div>
							<div class="btn-group" role="group">
								<button class="btn btn-default">
									<i class="fa fa-angle-right"></i>
								</button>
								<button class="btn btn-default">
									<i class="fa fa-angle-double-right"></i>
								</button>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-3">
						<div class="input-group">
							<span class="input-group-addon">
								Vista
							</span>
							<select class="form-control" v-model="view">
								<option value="card">En tarjetas</option>
								<option value="list">En lista</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<div v-if="paginate.data == null" class="container-fluid col-xs-12">
				<div class="text-center bg-warning col-xs-12 text-warning" style="margin-top:10px; margin-bottom:10px;font-size: 25px;border: 1px solid #999;border-radius: 6px;">
					<span class="fa-stack fa-lg text-warning" style="font-size: 3.5em;">
						<i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw fa-stack-2x text-warning"></i>
						<i class="fa fa-archive fa-stack-1x text-warning"></i>
					</span>
					<br>
					<p>Cargando ...</p>
				</div>
			</div>
			<div class="container-fluid col-xs-12" v-if="paginate.data != null && view == 'list'">
				<div class="panel panel-default shadow">
					<div class="panel-body">
						<table class="table table-hover">
					<thead>
						<tr>
							<th style="min-width: 102px;">
								Código
								<button class="btn btn-sm" v-on:click="reorder('barcode')" v-bind:class="{'btn-primary': order.index=='barcode', 'btn-default': order.index != 'barcode'}">
									<i class="fa fa-sort" v-if="order.index != 'barcode'"></i>
									<i class="fa fa-sort-alpha-asc" v-if="order.index == 'barcode' && order.highestToLowest == true"></i>
									<i class="fa fa-sort-alpha-desc" v-if="order.index == 'barcode' && order.highestToLowest == false"></i>
								</button>
							</th>
							<th>
								Descripción
								<button class="btn btn-sm" v-on:click="reorder('description')" v-bind:class="{'btn-primary': order.index=='description', 'btn-default': order.index != 'description'}">
									<i class="fa fa-sort" v-if="order.index != 'description'"></i>
									<i class="fa fa-sort-alpha-asc" v-if="order.index == 'description' && order.highestToLowest == true"></i>
									<i class="fa fa-sort-alpha-desc" v-if="order.index == 'description' && order.highestToLowest == false"></i>
								</button>
							</th>
							<th>
								Tipo
								<button class="btn btn-sm" v-on:click="reorder('type')" v-bind:class="{'btn-primary': order.index=='type', 'btn-default': order.index != 'type'}">
									<i class="fa fa-sort" v-if="order.index != 'type'"></i>
									<i class="fa fa-sort-alpha-asc" v-if="order.index == 'type' && order.highestToLowest == true"></i>
									<i class="fa fa-sort-alpha-desc" v-if="order.index == 'type' && order.highestToLowest == false"></i>
								</button>
							</th>
							<th>
								Estado
								<button class="btn btn-sm" v-on:click="reorder('state')" v-bind:class="{'btn-primary': order.index=='state', 'btn-default': order.index != 'state'}">
									<i class="fa fa-sort" v-if="order.index != 'state'"></i>
									<i class="fa fa-sort-alpha-asc" v-if="order.index == 'state' && order.highestToLowest == true"></i>
									<i class="fa fa-sort-alpha-desc" v-if="order.index == 'state' && order.highestToLowest == false"></i>
								</button>
							</th>
							<th>
								
							</th>
						</tr>
					</thead>
					<tbody>
						<template v-for="loanable in paginate.data" >
							<tr>
								<td>
									{{loanable.barcode}}
								</td>
								<td style="max-width: 400px;" v-if="loanable.specification_type == 'App\\AudiovisualEquipment'">
									<b>{{loanable.specific.type.name}}</b> - {{loanable.specific.brand.name}} - {{loanable.specific.model.name}}
								</td>
								<td style="max-width: 400px;" v-if="loanable.specification_type == 'App\\CopyPeriodicPublication'">
									<b>{{loanable.specific.periodic_publication.title}}</b> no.{{loanable.specific.number}} vol.{{loanable.specific.volume}}
								</td>
								<td style="max-width: 400px;" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\CartographicMaterial'">
									<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i> - {{loanable.specific.material.dimension}}
								</td>
								<td style="max-width: 400px;" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
									<b>{{loanable.specific.title}}</b> - {{loanable.specific.material.physical_description}} - <i>{{loanable.specific.editorial.name}}</i>
								</td>
								<td style="max-width: 400px;" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\Book'">
									<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i>
								</td>
								<td style="max-width: 400px;" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\AudiovisualMaterial'">
									<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i>
								</td>
								
								<td v-if="loanable.specification_type == 'App\\AudiovisualEquipment'">
									<i class="fa fa-laptop"></i> Equipo audiovisual
								</td>
								<td v-if="loanable.specification_type == 'App\\CopyPeriodicPublication'">
									<i class="fa fa-newspaper-o"></i> Publicación periódica
								</td>
								<td v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\CartographicMaterial'">
									<i class="fa fa-map-o"></i> Material cartográfico
								</td>
								<td v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
									<i class="fa fa-certificate"></i> Objeto tridimensional
								</td>
								<td v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\Book'">
									<i class="fa fa-book"></i> Libro
								</td>
								<td v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\AudiovisualMaterial'">
									<i class="fa fa-file-video-o"></i> Material audiovisual
								</td>
								
								<td class="text-success" v-if="loanable.state_id == 1">
									<i class="fa fa-check-circle-o"></i> Disponible
								</td>
								<td class="text-primary" v-if="loanable.state_id == 2">
									<i class="fa fa-circle-o"></i> Prestado
								</td>
								<td class="text-muted" v-if="loanable.state_id == 3">
									<i class="fa fa-minus-circle"></i> Fuera de servicio
								</td>
								<td class="text-muted" v-if="loanable.state_id == 4">
									<i class="fa fa-cog"></i> En reparación
								</td>
								<td class="text-danger" v-if="loanable.state_id == 5">
									<i class="fa fa-exclamation-circle"></i>
									No devuelto
								</td>
								<td>
									<router-link :to="{name:'activo', params:{id:loanable.id}}" class="btn btn-primary btn-xs">
										<i class="fa fa-eye"></i> Ver
									</router-link>
									<button v-on:click="deleteLoanable(loanable)" class="btn btn-danger btn-xs" v-if="loanable.state_id != 2 && user.role_id == 1">
										<i class="fa fa-trash-o"></i> Borrar
									</button>
								</td>
							</tr>
						</template>
					</tbody>
				</table>
					</div>
				</div>
			</div>
			<div v-if="paginate.data != null && view == 'card'">
				<div class="col-xs-12 form-inline" style="margin-bottom: 15px;">
					<div class="input-group">
						<span class="input-group-addon">
							Ordenar por
						</span>
						<select class="form-control" v-model="order.index">
							<option value="barcode">Código de barras</option>
							<option value="description">Descripción</option>
							<option value="type">Tipo</option>
							<option value="state">Estado</option>
						</select>
					</div>
					<div class="input-group">
						<span class="input-group-addon">
							de forma
						</span>
						<select class="form-control" v-model="order.highestToLowest">
							<option value="1">Ascendente (A-Z)</option>
							<option value="0">Decendente (Z-A)</option>
						</select>
					</div>
				</div>
				<div class="container-fluid col-xs-12" v-for="loanable in paginate.data">
					<div class="well container-fluid shadow">
						<div class="row">
							<div class="col-xs-12 col-sm-3">
								<a href="#">
									<h4 v-if="loanable.specification_type == 'App\\AudiovisualEquipment'">
										<b>{{loanable.specific.type.name}}</b> - {{loanable.specific.brand.name}}
									</h4>
									<h4 v-if="loanable.specification_type == 'App\\CopyPeriodicPublication'">
										<b>{{loanable.specific.periodic_publication.title}}</b> no.{{loanable.specific.number}} vol.{{loanable.specific.volume}}
									</h4>
									<h4 v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\CartographicMaterial'">
										<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i> - {{loanable.specific.material.dimension}}
									</h4>
									<h4 v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
										<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i>
									</h4>
									<h4 v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\Book'">
										<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i>
									</h4>
									<h4 v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\AudiovisualMaterial'">
										<b>{{loanable.specific.title}}</b> - <i>{{loanable.specific.editorial.name}}</i>
									</h4>
								</a>
								<span class="text-success">Código de barras: <b>{{loanable.barcode}}</b></span>
								</br>
								<span class="text-muted" v-if="loanable.specification_type == 'App\\AudiovisualEquipment'">
									<i class="fa fa-laptop"></i> Equipo audiovisual
								</span>
								<span class="text-muted" v-if="loanable.specification_type == 'App\\CopyPeriodicPublication'">
									<i class="fa fa-newspaper-o"></i> Publicación periódica
								</span>
								<span class="text-muted" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\CartographicMaterial'">
									<i class="fa fa-map-o"></i> Material cartográfico
								</span>
								<span class="text-muted" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
									<i class="fa fa-certificate"></i> Objeto tridimensional
								</span>
								<span class="text-muted" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\Book'">
									<i class="fa fa-book"></i> Libro
								</span>
								<span class="text-muted" v-if="loanable.specification_type == 'App\\BibliographicMaterial' && loanable.specific.material_type == 'App\\AudiovisualMaterial'">
									<i class="fa fa-file-video-o"></i> Material audiovisual
								</span>
							</div>
							<div class="col-xs-12 col-sm-2">
								<h4 v-if="loanable.state_id == 1">
									<span class="label label-success">
										<i class="fa fa-check-circle-o"></i>
										Disponible
									</span>
								</h4>
								<h4 v-if="loanable.state_id == 2">
									<span class="label label-primary">
										<i class="fa fa-circle-o"></i>
										Prestado
									</span>
								</h4>
								<h4 v-if="loanable.state_id == 3">
									<span class="label label-default">
										<i class="fa fa-minus-circle"></i>
										Fuera de servicio
									</span>
								</h4>
								<h4 v-if="loanable.state_id == 4">
									<span class="label label-default">
										<i class="fa fa-cog"></i>
										En reparación
									</span>
								</h4>
								<h4 v-if="loanable.state_id == 0">
									<span class="label label-danger">
										<i class="fa fa-exclamation-circle"></i>
										No devuelto
									</span>
								</h4>
								<router-link :to="{name:'activo', params:{id:loanable.id}}" class="btn btn-primary btn-xs">
									<i class="fa fa-eye"></i> Ver
								</router-link>
								<button v-on:click="deleteLoanable()" class="btn btn-danger btn-xs" v-if="loanable.state_id != 2 && user.role_id == 1">
									<i class="fa fa-trash-o"></i> Borrar
								</button>
							</div>
							<div class="col-xs-12 col-sm-4">
								<h5><i class="fa fa-info-circle"></i> Detalles:</h5>
								<span v-if="loanable.specification_type == 'App\\AudiovisualEquipment'">
									<b>Marca:</b> {{loanable.specific.brand.name}}
									<br>
									<b>Modelo:</b> {{loanable.specific.model.name}}
								</span>
								<span v-if="loanable.specification_type == 'App\\CopyPeriodicPublication'">
									<b>ISSN:</b> {{loanable.specific.periodic_publication.ISSN}}
									<br>
									<b>Signatura:</b> <span class="text-success">{{loanable.specific.periodic_publication.signature}}</span>
									<br>
									<b>Editorial:</b> {{loanable.specific.periodic_publication.editorial.name}}
									<br>
									<b>Artículos:</b>
									<span v-for="(article, key) in loanable.specific.article">
										{{ article.title }} <span v-if="key+1 != loanable.specific.article.length"> - </span>
									</span>
								</span>
								<span v-if="loanable.specification_type == 'App\\BibliographicMaterial'">
									<span v-if="loanable.specific.material_type == 'App\\CartographicMaterial'">
										<b>Dimensiones:</b> {{loanable.specific.material.dimension}}
										<br>
									</span>
									<span v-if="loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
										<b>Descripción fisica:</b> {{loanable.specific.material.physical_description}}
										<br>
									</span>
									<span v-if="loanable.specific.material_type == 'App\\AudiovisualMaterial'">
										<b>Tipo:</b> <span>{{loanable.specific.material.audiovisual_type.name}}</span>
										<br>
										<b>Formato:</b> <span>{{loanable.specific.material.audiovisual_format.name}}</span>
										<br>
									</span>
									<b>Signatura:</b> <span class="text-success">{{loanable.specific.signature}}</span>
									<br>
									<b>Autor<span v-if="loanable.specific.authors.length > 1">es</span>:</b> 
									<span v-for="(author, key) in loanable.specific.authors">
										{{author.name}} {{author.last_Name}}
										<span v-if="key+1 != loanable.specific.authors.length"> - </span>
									</span>
									<br>
									<b>Editorial:</b> {{loanable.specific.editorial.name}}
									<br>
									<b>Lugar de publicación:</b> {{loanable.specific.publication_place}}
								</span>
							</div>
							<div class="col-xs-12 col-sm-3">
								<h5><i class="fa fa-sticky-note-o" ></i> Nota:</h5>
								{{loanable.note}}
								<span v-if="loanable.note == null || loanable.note.trim() == ''" class="text-muted">
									<span class="fa-stack">
										  	<i class="fa fa-sticky-note-o fa-stack-1x" ></i>
										  	<i class="fa fa-ban fa-stack-2x"></i>
									</span>
									Sin nota
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="container-fluid" style="margin-bottom: 15px;" v-if="paginate.data != null">
				<div class="row">
					<div class="col-xs-12 col-sm-9">
						<div class="btn-toolbar" role="toolbar">
							<div class="btn-group" role="group">
								<button class="btn btn-default">
									<i class="fa fa-angle-double-left"></i>
								</button>
								<button class="btn btn-default">
									<i class="fa fa-angle-left"></i>
								</button>
							</div>
							<div class="btn-group" role="group">
								<router-link :to="{ name: 'gestion', params: { page: (paginate.current_page >=1 )?((paginate.current_page-4)<1)?n:n+(paginate.current_page-4):1 }}" class="btn" v-for="n in (paginate.last_page >= 1)?((paginate.last_page < 7)?paginate.last_page:7):1" v-bind:class="{'btn-primary':(((paginate.current_page-4)<1)?n:n+(paginate.current_page-4))==paginate.current_page, 'btn-default':(((paginate.current_page-4)<1)?n:n+(paginate.current_page-4)!=paginate.current_page)}">
									{{ (paginate.current_page >=1 )?((paginate.current_page-4)<1)?n:n+(paginate.current_page-4):1 }}
								</router-link>
							</div>
							<div class="btn-group" role="group">
								<button class="btn btn-default">
									<i class="fa fa-angle-right"></i>
								</button>
								<button class="btn btn-default">
									<i class="fa fa-angle-double-right"></i>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div style="display:none" id="loanableTemplate">
		<div class="container-fluid" :listing-id="init">
			<div class="col-xs-12 col-sm-5">
				<div class="panel panel-default card-wrapper shadow">
					<div class="card-icon">
						<div id="icon-box" style="height: 250px;">
							<span>
								<i class="fa fa-lg" v-bind:class="{
									'fa-laptop': type=='equipo',
									'fa-newspaper-o': type=='publicacion',
									'fa-map-o': type=='cartografico',
									'fa-certificate': type=='tridimensional',
									'fa-book': type=='libro',
									'fa-file-video-o': type=='aduiovisual',
								}"></i>
								<p style="font-size: 20px;line-height: 1;">
									<span v-if="type=='equipo'">
										Equipo audiovisual
									</span>
									<span v-if="type=='publicacion'">
										Publicación periódica
									</span>
									<span v-if="type=='cartografico'">
										Material cartográfico
									</span>
									<span v-if="type=='tridimensional'">
										Objeto tridimensional
									</span>
									<span v-if="type=='libro'">
										Libro
									</span>
									<span v-if="type=='aduiovisual'">
										Material audiovisual
									</span>
								</p>
							</span>
						</div>
					</div>
					<div class="card-content">
						<h3 style="margin-top: 5px;margin-bottom: 5px;">
							<b>
								{{loanable.named}}
							</b>
							<i v-if="!loanable.named" class="text-muted">
								Sin datos
							</i>
						</h3>
						<p>
							<div class="input-group">
								<span class="input-group-addon">Codigo de barras:</span>
								<input placeholder="Sin código de barras" type="text" v-model="loanable.barcode" class="form-control" v-bind:disabled="loanable.state_id == 2"/>
							</div>
						</p>
						<span>Estado:</span>
						<div class="btn-group">
							<button v-bind:class="{
								'btn-success': (loanable.state.id == 1), 
								'btn-primary': (loanable.state.id == 2), 
								'btn-default': (loanable.state.id == 3 || loanable.state.id == 4)
							}" v-bind:disabled="loanable.state.id == 2" type="button" class="btn dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<i class="fa" v-bind:class="{
									'fa-check-circle-o': (loanable.state.id == 1),
									'fa-circle-o': (loanable.state.id == 2),
									'fa-minus-circle': (loanable.state.id == 3),
									'fa-cog': (loanable.state.id == 4)
								}"></i>
								<span v-if="loanable.state != null">
									{{loanable.state.description}}
								</span>
								<span class="caret"></span>
							</button>
						  	<ul class="dropdown-menu">
								<li style="cursor: pointer" v-if="loanable.state.id != 1">
									<a v-on:click="loanable.state = states[0]">
										<i class="fa fa-check-circle-o"></i> Disponible
									</a>
								</li>
								<li style="cursor: pointer" v-if="loanable.state.id != 3">
									<a v-on:click="loanable.state = states[2]">
										<i class="fa fa-minus-circle"></i> Fuera de servicio
									</a>
								</li>
								<li style="cursor: pointer" v-if="loanable.state.id != 4">
									<a  v-on:click="loanable.state = states[3]">
										<i class="fa fa-cog"></i>  En reparación
									</a>
								</li>
						  	</ul>
						</div>
						<div style="margin-top: 5px;">
							<span>Notas:</span>
							<textarea v-bind:disabled="loanable.state.id == 2" style="width: 100%; resize:none;" v-model="loanable.note" class="form-control"></textarea>
						</div>
					</div>
				</div>
				<div class="list-group shadow" v-if="type == 'equipo'">
					<h4 class="list-group-item active">
						<i class="fa fa-info-circle" aria-hidden="true"></i>
						Detalles
					</h4>
					<div class="list-group-item container-fluid">
						<div class="input-group">
							<span class="input-group-addon">Tipo:</span>
							<select v-model="loanable.specific.type" class="form-control" v-bind:disabled="loanable.state.id == 2">
								<option v-for="type in types" v-bind:value="type">
									{{type.name}}
								</option>
							</select>
							<span class="input-group-btn">
								<button class="btn btn-primary" type="button"><i class="fa fa-plus" aria-hidden="true"></i> Nuevo</button>
							</span>
						</div>
					</div>
					<div class="list-group-item container-fluid">
						<div class="input-group">
							<span class="input-group-addon">Marca:</span>
							<select v-model="loanable.specific.brand" class="form-control" v-bind:disabled="loanable.state.id == 2">
								<option v-for="brand in brands" v-bind:value="brand">
									{{brand.name}}
								</option>
							</select>
							<span class="input-group-btn">
								<button class="btn btn-primary" type="button"><i class="fa fa-plus" aria-hidden="true"></i> Nuevo</button>
							</span>
						</div>
					</div>
					<div class="list-group-item container-fluid">
						<div class="input-group">
							<span class="input-group-addon">Modelo:</span>
							<select v-model="loanable.specific.model" class="form-control" v-bind:disabled="loanable.state.id == 2">
								<option v-for="model in models" v-bind:value="model">
									{{model.name}}
								</option>
							</select>
							<span class="input-group-btn">
								<button class="btn btn-primary" type="button"><i class="fa fa-plus" aria-hidden="true"></i> Nuevo</button>
							</span>
						</div>
					</div>
				</div>
				<div class="list-group shadow" v-if="type == 'cartografico' || type == 'libro' || type == 'aduiovisual' || type == 'tridimensional'">
					<h4 class="list-group-item active">
						<i class="fa fa-info-circle" aria-hidden="true"></i>
						Detalles
					</h4>
					<p class="list-group-item">
						<b>
							Titulo:
						</b>
						{{loanable.specific.title}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item">
						<b>
							Signatura:
						</b>
						{{loanable.specific.signature}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item">
						<b>
							Editorial:
						</b>
						{{loanable.specific.editorial.name}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item">
						<b>
							Año de publicación:
						</b>
						{{loanable.specific.year}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item">
						<b>
							Lugar de publicación:
						</b>
						{{loanable.specific.publication_place}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item" v-if="loanable.specific.material_type == 'App\\CartographicMaterial'">
						<b>
							Dimensiones:
						</b>
						{{loanable.specific.material.dimension}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item" v-if="loanable.specific.material_type == 'App\\ThreeDimensionalObject'">
						<b>
							Descripción física:
						</b>
						{{loanable.specific.material.physical_description}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item" v-if="loanable.specific.material_type == 'App\\AudiovisualMaterial'">
						<b>
							Formato:
						</b>
						{{loanable.specific.material.audiovisual_format.name}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
					<p class="list-group-item" v-if="loanable.specific.material_type == 'App\\AudiovisualMaterial'">
						<b>
							Tipo:
						</b>
						{{loanable.specific.material.audiovisual_type.name}}
						<button class="btn btn-primary btn-xs pull-right" v-bind:disabled="loanable.state.id == 2">
							<span class="fa fa-edit"></span>
							Editar
						</button>
					</p>
				</div>
			</div>
			<div class="col-xs-12 col-sm-7">
				<div class="panel panel-info shadow">
					<div class="panel-heading">
						<b>
							<i class="fa fa-history" aria-hidden="true"></i> Historial de prestamos
						</b>
					</div>
					<div class="panel-body">
						<div class="row">
							<div class="col-xs-6">
								<div class="input-group">
									<span class="input-group-addon">
										<i class="fa fa-clock-o" aria-hidden="true"></i>
										Periodo	
									</span>
									<select class="form-control">
										<option>
											Hoy
										</option>
										<option>
											Esta semana
										</option>
										<option>
											La semana pasada
										</option>
										<option>
											El útimo mes
										</option>
										<option>
											El mes pasado
										</option>
										<option>
											El útimo año
										</option>
										<option>
											Personalizado ...
										</option>
									</select>
								</div>	
							</div>
							<div class="col-xs-6">
								<div class="input-group">
									<span class="input-group-addon">
										<i class="fa fa-hand-paper-o" aria-hidden="true"></i>
										Acción	
									</span>
									<select class="form-control">
										<option>
											Todas
										</option>
										<option>
											Prestamos
										</option>
										<option>
											Devoluciones
										</option>
										<option>
											Cambios de datos
										</option>
									</select>
								</div>
							</div>
						</div>
						<div class="container-fluid" style="margin-top: 10px;">
							<div class="row">
								<div class="input-group col-xs-12">
									<span class="input-group-addon">
										<i class="fa fa-calendar" aria-hidden="true"></i>
										Desde	
									</span>
									<input type="text" class="form-control" placeholder="Fecha" disabled="disabled">
									<span class="input-group-addon">
										<i class="fa fa-calendar" aria-hidden="true"></i>
										Hasta	
									</span>
									<input type="text" class="form-control" placeholder="Fecha" disabled="disabled">
								</div>
							</div>
								
						</div>
						Scroll position: {{scrollPosition}} - Scroll Height: {{scrollHeight}} - Client Height: {{clientHeight}}
						<div @scroll="handleScroll" id="history-loans-to-loanable-container" style="border-radius:5px;height: 320px;overflow-y: auto;box-shadow: inset 0 0 18px rgba(0, 0, 0, 0.36);padding: 5px;margin-top: 10px;">
							<table class="table table-hover">
								<thead>
									<tr>
										<th>Prestado</th>
										<th>Devuelto</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<template>
										<tr v-for="loan in loans.data">
											<td>
												{{moment(loan.departure_time).format('DD [de] MMMM [del] YYYY [-] hh[:]mm a')}}
											</td>
											<td v-if="loan.user_return_time != '0000-00-00 00:00:00'">
												{{moment(loan.user_return_time).format('DD [de] MMMM [del] YYYY [-] hh[:]mm a')}}
											</td>
											<td v-else>
												<i class="text-muted">
													<i class="fa fa-clock-o" aria-hidden="true"></i>
													En prestamo
													<br>
													<span class="text-danger" v-if="isShowableAlert(loan.return_time)">
														({{moment(loan.return_time).fromNow(true)}} tarde)
													</span>
													<span class="text-primary" v-if="!isShowableAlert(loan.return_time)">
														({{moment(loan.return_time).fromNow(true)}} para terminar)
													</span>
												</i>	
											</td>
											<td>
												<router-link  :to="{ name: 'prestamo', params: { id: loan.id }}" aria-label="Previous" class="btn btn-success btn-xs pull-right">
										        	<span class="fa fa-info-circle"></span>
													Detalles
												</router-link>
											</td>
										</tr>
										<tr>
											<td colspan="3">
												<i class="text-muted">
													<i class="fa fa-th-list" aria-hidden="true"></i>
													Inicio de los registros
												</i>
											</td>
										</tr>
									</template>
										
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			{{loanable}}
		</div>
			
	</div>
	<div style="display:none" id="configTemplate">
		<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
			<div class="well row">
				<h3>
					Configuración general
				</h3>
				<br /> <br />
				<div class="col-xs-12 col-md-6">
				<label for="opening_hour_week">Hora de apertura entre semana:</label>
					<div class="input-group has-default">
					<span id="user" class="input-group-addon" >
							<i class="fa fa-clock-o"></i>
					</span>
					<select name="" id="opening_hour_week" class="form-control">
						<option value="" disabled selected="selected">Hora de apertura</option>
						<!-- <option v-for="" value="">Lista de horas</option> -->
						<!--<option value = "01" selected> Hora de apertura</option>-->
								<option value="06">06:00 am</option>
								<option value="07"selected>07:00 am</option>
								<option value="08">08:00 am</option>
								<option value="09">09:00 am</option>
								<option value="10">10:00 am</option>
								<option value="11">11:00 am</option>
								<option value="12">12:00 pm</option>
								<option value="13">01:00 pm</option>
								<option value="14">02:00 pm</option>
					</select>
					</div>
				</div>
				
				<div class="col-xs-12 col-md-6">
				<label for="closing_hour_week">Hora de cierre entre semana:</label>
					<div class="input-group has-default">
						<span id="user" class="input-group-addon" >
							<i class="fa fa-clock-o" ></i>
						</span>
						<select name="" id="closing_hour_week" class="form-control">
							<option value="" disabled selected="selected">Hora de cierre</option>
								
								<option value="12">12:00 pm</option>
								<option value="13">01:00 pm</option>
								<option value="14">02:00 pm</option>
								<option value="07">03:00 pm</option>
								<option value="08">04:00 pm</option>
								<option value="09">05:00 pm</option>
								<option value="10">06:00 pm</option>
								<option value="11"selected>07:00 pm</option>
					    </select>
						</div>
				</div>	
				<br /> <br /> <br /> <br />
				<div class="col-xs-12 col-md-6">
				<label for="opening_hour_saturday">Hora de apertura sábados:</label>
					<div class="input-group has-default">
						<span id="user" class="input-group-addon">
							<i class="fa fa-clock-o"></i>
						</span>
						<select name="" id="opening_hour_saturday" class="form-control">
							<option value="" disabled selected="selected">Hora de apertura</option>
							<option value="06">06:00 am</option>
								<option value="07"selected>07:00 am</option>
								<option value="08">08:00 am</option>
								<option value="09">09:00 am</option>
								<option value="10">10:00 am</option>
								<option value="11">11:00 am</option>
								<option value="12">12:00 pm</option>
								<option value="13">01:00 pm</option>
								<option value="14">02:00 pm</option>
						</select>
						</div>
				</div>
				<div class="col-xs-12 col-md-6">
				<label for="closing_hour_saturday">Hora de cierre sábados:</label>
					<div class="input-group has-default">
						<span id="user" class="input-group-addon">
							<i class="fa fa-clock-o"></i>
						</span>
						<select name="" id="closing_hour_saturday" class="form-control">
							<option value="" disabled selected="selected">Hora de cierre</option>
							<option value="06">06:00 am</option>
								<option value="12">12:00 pm</option>
								<option value="13">01:00 pm</option>
								<option value="14">02:00 pm</option>
								<option value="07">03:00 am</option>
								<option value="08"selected>04:00 pm</option>
								<option value="09">05:00 pm</option>
								<option value="10">06:00 pm</option>
								<option value="11">07:00 pm</option>
						</select>
					</div>
				</div>	
				<br /> <br /> <br /> <br />
				<div class="col-xs-12 col-md-6">
				<label for="library_name">Nombre de la biblioteca:</label>
					<div class="input-group has-default">
						<span id="user" class="input-group-addon">
							<i class="fa fa-etsy" ></i>
						</span>
						<input autofocus="autofocus" id="library_name"type="text" placeholder="Nombre de la biblioteca" aria-describedby="user" class="form-control">
					</div>
				</div>
				<!--
				<div class="col-xs-12 col-md-6">
				<label for="theme">Tema:</label>
					<div class="input-group has-default">
						<span id="user" class="input-group-addon">
							<i ></i>
						</span>
						<select name="" id="theme" class="form-control">
							<option value="" disabled selected="selected">Tema actual</option>
							<option v-for="" value="">Lista de temas</option>
						</select>
					</div>
				</div>
				-->
				<br /> <br /> <br />	
				<div class="col-xs-12"><button style="margin-top: 10px;" class="btn btn-primary pull-right">
					<i class="fa fa-floppy-o"></i> Guardar
				</button></div>
			</div>
		</div>
	</div>
	<div style="display:none" id="dayPendingsLoansTemplate">
		<div class="col-xs-12 col-sm-10 col-sm-offset-1" :listing-id="cartographic_panel">
				<div class="well">
					<h3>
						Prestamos pendientes del día
					</h3>
					<span class="text-muted" >
							Página {{$route.params.id}} de {{loan_data.last_page}}
					</span>
					
					<nav aria-label="Page navigation">
				  <ul class="pagination">
				    <li>
				      	<router-link  :to="{ name: 'prestamos-dia', params: { id: 1 }}" aria-label="Previous">
				        	<span>&laquo;</span>
						</router-link>
				    </li>
				    <template v-for="index in loan_data.last_page">
					    <li >
					    	<router-link  :to="{ name: 'prestamos-dia', params: { id: index }}">
								{{index}}
							</router-link>
					    </li>
				    </template>
				    <li>
				    	<router-link  :to="{ name: 'prestamos-dia', params: { id: loan_data.last_page }}"  aria-label="Next">
							<span>&raquo;</span>
						</router-link>
				    </li>
				  </ul>
				</nav>
				<table class="table table-striped">
						<thead>
							<tr>
								<th>
									Código de Barras
								</th>
								<th>
									Fecha de préstamo 
								</th>
								<th>
									Usuario
								</th>
							</tr>
						</thead>
					<tbody>
						<template v-for="loan_item in loan_data.data" >
							<tr>
								<td>
									{{loan_item}}
								</td>
								<td>
									{{loan_item}}
								
								</td>
								<td>
									{{loan_item}}
								</td>
							</tr>
						</template>
					</tbody>
				</table>
				
				<span class="text-muted">
				
					Resultados desde {{loan_data.from}} hasta {{loan_data.to}}
				</span>
				<nav aria-label="Page navigation">
				  <ul class="pagination">
				    <li>
				      	<router-link  :to="{ name: 'prestamos-dia', params: { id: 1 }}" aria-label="Previous">
				        	<span>&laquo;</span>
						</router-link>
				    </li>
				    <template v-for="index in loan_data.last_page">
					    <li >
					    	<router-link  :to="{ name: 'prestamos-dia', params: { id: index }}">
								{{index}}
							</router-link>
					    </li>
				    </template>
				    <li>
				    	<router-link  :to="{ name: 'prestamos-dia', params: { id: loan_data.last_page }}"  aria-label="Next">
							<span>&raquo;</span>
						</router-link>
				    </li>
				  </ul>
				</nav>
			</div>
		</div><!--ERROR PAGE -->
	</div>
	<div style="display:none" id="dashboardPanel">
		<div :listing-id="init">
			<h1>Panel administrativo</h1>
		</div>
	</div>
	<div style="display:none" id="loanDetails">
		<div :listing-id="init">
			<div class="container-fluid" v-if="loan">
				<div class="alert alert-danger" role="alert" v-if="isShowableAlert(loan.return_time)">
					<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
					<b>¡Alerta!</b> 
					El usaurio 
					<router-link  :to="{ name: 'usuario', params: { id: loan.user.id }}" class="alert-link">
						<b>{{loan.user.identity_card}}</b> - {{loan.user.name}} {{loan.user.last_name}}
					</router-link>
					tenía que haber devuelto el prestamo 
					<b>
						{{moment(loan.return_time).fromNow()}}.
					</b>
				</div>
				<div class="panel panel-danger shadow" v-if="loan.penalty">
					<div class="panel-heading">
						<!--<router-link  v-if="loan.receiver" :to="{ name: 'usuario', params: { id: loan.receiver.id }}" class="btn btn-xs btn-success pull-right">
							<i class="fa fa-eye" aria-hidden="true"></i>
							Ver
						</router-link>-->
						<h3 class="panel-title">
							<i class="fa fa-clock-o" aria-hidden="true"></i>
							Se ha efectuado una multa a este prestamo
						</h3>
					</div>
					<div class="panel-body text-danger">
						Termina {{moment(loan.penalty.penalty_time_finish).fromNow()}}, el {{moment(loan.penalty.penalty_time_finish).format('dddd DD [de] MMMM [del] YYYY [a las] hh[:]mm a')}}
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-sm-6">
						<div class="panel panel-primary shadow">
							<div class="panel-heading">
								<button class="btn btn-xs btn-danger pull-right" v-if="user.role_id == 1">
									<i class="fa fa-trash" aria-hidden="true"></i>
									Borrar
								</button>
								<h3 class="panel-title">
									<i class="fa fa-info-circle" aria-hidden="true"></i>
									Detalles del prestamo. 
								</h3>
							</div>
							<div class="panel-body">
								<p>
									<b class="text-muted">Identificador único del prestamo: {{loan.id}}</b>
								</p>
								<div class="col-xs-4 text-center">
									<i class="text-muted">
										<i class="fa fa-clock-o" aria-hidden="true"></i>
										Salida
									</i>
									<br>
									<b>
										El {{moment(loan.departure_time).format('dddd DD [de] MMMM [del] YYYY [-] hh[:]mm a')}}
									</b>
								</div>
								<div class="col-xs-4 text-center" style="border-left: 1px solid #ccc;border-right: 1px solid #ccc;">
									<i class="text-muted">
										<i class="fa fa-clock-o" aria-hidden="true"></i>
										Retorno previsto
									</i>
									<br>
									<b>
										El {{moment(loan.return_time).format('dddd DD [de] MMMM [del] YYYY [-] hh[:]mm a')}}
									</b>
								</div>
								<div class="col-xs-4 text-center">
									<i class="text-muted">
										<i class="fa fa-clock-o" aria-hidden="true"></i>
										Retorno efectivo
									</i>
									<br>
									<b v-if="loan.user_return_time != '0000-00-00 00:00:00'">
										El {{moment(loan.user_return_time).format('dddd DD [de] MMMM [del] YYYY [-] hh[:]mm a')}}
									</b>
									<b v-else class="text-info" v-bind:class="{'text-danger':isShowableAlert(loan.return_time)}">
										<i class="fa fa-circle-o"></i>
										Prestamo en curso 
										<br>
										<small>
											<span v-if="!isShowableAlert(loan.return_time)">
												Quedan
											</span>
											<span v-else>
												Debió terminar
											</span>
											{{moment(loan.return_time).fromNow(!isShowableAlert(loan.return_time))}}
											<span v-if="!isShowableAlert(loan.return_time)">
												de prestamo
											</span>
										</small>
									</b>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6">
						<div class="panel panel-primary shadow">
							<div class="panel-heading">
								<router-link  :to="{ name: 'activo', params: { id: loan.loanable.id }}" class="btn btn-xs btn-success pull-right" v-if="user.role_id == 1">
									<i class="fa fa-eye" aria-hidden="true"></i>
									Ver
								</router-link>
								<h3 class="panel-title">
									<i class="fa fa-archive" aria-hidden="true"></i>
									Artículo prestado
								</h3>
							</div>
							<div class="panel-body">
								<div class="col-xs-4 text-center">
									<i class="text-muted">
										<i class="fa fa-barcode" aria-hidden="true"></i>
										Código de barras
									</i>
									<br>
									<h4 class="text-success">
										<b>
											{{loan.loanable.barcode}}
										</b>
									</h4>
								</div>
								<div class="col-xs-4 text-center" style="border-left: 1px solid #ccc;border-right: 1px solid #ccc;">
									<i class="text-muted">
										<i class="fa fa-info-circle" aria-hidden="true"></i>
										Descripción
									</i>
									<br>
									<span>
										{{loan.loanable.named}}
									</span>
								</div>
								<div class="col-xs-4 text-center">
									<i class="text-muted">
										<i class="fa fa-sticky-note" aria-hidden="true"></i>
										Nota
									</i>
									<br>
									<i>
										{{loan.loanable.note}}
									</i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="panel panel-default shadow">
							<div class="panel-heading">
								<router-link  :to="{ name: 'usuario', params: { id: loan.authorizer.id }}" class="btn btn-xs btn-success pull-right">
									<i class="fa fa-eye" aria-hidden="true"></i>
									Ver
								</router-link>
								<h3 class="panel-title">
									<i class="fa fa-user-o" aria-hidden="true"></i>
									Usuario autorizador
								</h3>
							</div>
							<div class="panel-body">
								<p class="text-muted">
									Usuario que entega el artículo
									<br>
									{{moment(loan.departure_time).format('DD[/]MM[/]YYYY [-] hh[:]mm a')}}
								</p>
								<ul class="list-group">
									<li class="list-group-item">
										<b class="text-primary">Nombre:</b> 
										<router-link  :to="{ name: 'usuario', params: { id: loan.authorizer.id }}">
											{{loan.authorizer.name}} {{loan.authorizer.last_name}}
											<i class="fa fa-external-link"></i>
										</router-link>
									</li> 
									<li class="list-group-item" v-if="loan.authorizer.identity_card">
										<b class="text-primary">
											Cedula:
										</b> 
										{{loan.authorizer.identity_card}}
									</li>
									<li class="list-group-item" v-if="loan.authorizer.student">
										<b class="text-primary">
											Carné:
										</b> 
										{{loan.authorizer.student.license}}
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="panel panel-info shadow">
							<div class="panel-heading">
								<router-link  :to="{ name: 'usuario', params: { id: loan.user.id }}" class="btn btn-xs btn-success pull-right">
									<i class="fa fa-eye" aria-hidden="true"></i>
									Ver
								</router-link>
								<b class="panel-title">
									<i class="fa fa-user" aria-hidden="true"></i>
									Usuario solicitante
								</b>
							</div>
							<div class="panel-body">
								<p class="text-muted">
									Usuario que solicita el prestamo
									<br>
									{{moment(loan.departure_time).format('DD[/]MM[/]YYYY [-] hh[:]mm a')}}
								</p>
								<ul class="list-group">
									<li class="list-group-item">
										<b class="text-primary">Nombre:</b> 
										<router-link  :to="{ name: 'usuario', params: { id: loan.user.id }}">
											{{loan.user.name}} {{loan.user.last_name}}
											<i class="fa fa-external-link"></i>
										</router-link>
									</li> 
									<li class="list-group-item" v-if="loan.user.identity_card">
										<b class="text-primary">
											Cedula:
										</b> 
										{{loan.user.identity_card}}
									</li>
									<li class="list-group-item" v-if="loan.user.student">
										<b class="text-primary">
											Carné:
										</b> 
										{{loan.user.student.license}}
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="panel panel-default shadow">
							<div class="panel-heading">
								<router-link  v-if="loan.receiver" :to="{ name: 'usuario', params: { id: loan.receiver.id }}" class="btn btn-xs btn-success pull-right">
									<i class="fa fa-eye" aria-hidden="true"></i>
									Ver
								</router-link>
								<h3 class="panel-title">
									<i class="fa fa-user-o" aria-hidden="true"></i>
									Usuario receptor
								</h3>
							</div>
							<div class="panel-body" v-if="loan.receiver">
								<p class="text-muted">
									Usuario que recive el artículo al finalizar el prestamo
									<br>
									{{moment(loan.user_return_time).format('DD[/]MM[/]YYYY [-] hh[:]mm a')}}
								</p>
								<ul class="list-group">
									<li class="list-group-item">
										<b class="text-primary">Nombre:</b> 
										<router-link  :to="{ name: 'usuario', params: { id: loan.receiver.id }}">
											{{loan.receiver.name}} {{loan.receiver.last_name}}
											<i class="fa fa-external-link"></i>
										</router-link>
									</li> 
									<li class="list-group-item">
										<b class="text-primary">
											Cedula:
										</b> 
										{{loan.receiver.identity_card}}
									</li>
									<li class="list-group-item">
										<b class="text-primary">
											Carné:
										</b> 
										{{loan.receiver.student.license}}
									</li>
								</ul>
							</div>
							<div class="panel-body" v-else>
								<b class="text-info" v-bind:class="{'text-danger':isShowableAlert(loan.return_time)}">
									<i class="fa fa-circle-o"></i>
									Prestamo en curso 
									<br>
									<small>
										<span v-if="!isShowableAlert(loan.return_time)">
											Quedan
										</span>
										<span v-else>
											Debió terminar
										</span>
										{{moment(loan.return_time).fromNow(!isShowableAlert(loan.return_time))}}
										<span v-if="!isShowableAlert(loan.return_time)">
											de prestamo
										</span>
									</small>
								</b>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div style="display:none" id="loanHistory">
		<div class="container-fluid" :listing-id="init">
			<div class="col-xs-12">
				<div class="panel panel-info shadow">
					<div class="panel-heading">
						<h3 class="panel-title">
							<i aria-hidden="true" class="fa fa-history"></i>
							Historial de prestamos
						</h3>
					</div>
					<div class="panel-body">
						<div class="input-group">
							<input type="text" placeholder="Buscar en el historial" class="form-control">
							<span class="input-group-btn">
								<button type="button" class="btn btn-default">
									<i class="fa fa-times"></i>
								</button>
								<button type="button" class="btn btn-info"><i class="fa fa-search"></i>
									Buscar
								</button>
							</span>
						</div>
						<br>
						<p>
							<b>Ver:</b>
							<br>
							<label class="unselectable radio-inline">
								<input type="radio" name="segment">
								Todos los prestamos
							</label>
							<label class="unselectable radio-inline">
								<input type="radio" name="segment">
								Prestamos activos y del día
							</label>
							<label class="unselectable radio-inline">
								<input type="radio" name="segment">
								Prestamos restrasados
							</label>
							<label class="unselectable radio-inline">
								<input type="radio" name="segment">
								Prestamos con multa
							</label>
						</p>
					</div>
				</div>
				<div class="panel panel-default shadow">
					<table class="table table-hover">
						<thead>
							<tr>
								<th>
									Fecha de prestamo
								</th>
								<th>
									Devolución prevista
								</th>
								<th>
									Devolución efectiva
								</th>
								<th>
									Multa
								</th>
								<th>
									Elemento
								</th>
								<th>
									Autizador
								</th>
								<th>
									Solicitante
								</th>
								<th>
									Receptor
								</th>
								<th>
									
								</th>
							</tr>
						</thead> 
						<tbody>
							<tr v-for="loan in loans">
								<td>
									<span class="adtitional-data" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="moment(loan.departure_time).format('DD[/]MM[/]YYYY [-] hh[:]mm a')" data-placement="bottom">
										{{moment(loan.departure_time).calendar()}}
									</span>
								<td>
									<span class="adtitional-data" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="moment(loan.return_time).format('DD[/]MM[/]YYYY [-] hh[:]mm a')" data-placement="bottom">
										{{moment(loan.return_time).calendar()}}
									</span>
								</td> 
								<td v-if="loan.user_return_time != '0000-00-00 00:00:00'">

									<span class="adtitional-data" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="moment(loan.user_return_time).format('DD[/]MM[/]YYYY [-] hh[:]mm a')" data-placement="bottom">
										{{moment(loan.user_return_time).calendar()}}
									</span>
								</td> 
								<td v-else class="text-info" v-bind:class="{'text-danger':isShowableAlert(loan.return_time)}">
									<i class="fa fa-circle-o"></i>
									Prestamo en curso
								</td> 
								<td class="text-danger" v-if="loan.penalty">
									<i style="font-size: 1.3em;" class="fa fa-times-circle-o"></i> Con multa
								</td> 
								<td class="text-success" v-else>
									<i style="font-size: 1.3em;" class="fa fa-check-circle-o"></i> Sin multa
								</td> 
								<td>
									<router-link class="alert-link adtitional-data" :to="{ name: 'activo', params: { id: loan.loanable.id }}" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="(loan.loanable.note)?'Nota: ' + loan.loanable.note:'Sin nota'" v-bind:data-original-title="loan.loanable.named" data-placement="bottom">
										<b>{{loan.loanable.barcode}}</b> 
									</router-link>
								</td> 
								<td>
									<router-link class="alert-link adtitional-data" :to="{ name: 'usuario', params: { id: loan.authorizer.id }}" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="loan.authorizer.name + ' ' + loan.authorizer.last_name + ' - ' + loan.authorizer.identity_card" data-original-title="Usuario" data-placement="bottom">
										{{loan.authorizer.name}}
									</router-link>
								</td> 
								<td>
									<router-link class="alert-link adtitional-data" :to="{ name: 'usuario', params: { id: loan.user.id }}" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="loan.user.name + ' ' + loan.user.last_name + ' - ' + loan.user.identity_card" data-original-title="Usuario" data-placement="bottom">
										{{loan.user.name}}
									</router-link>
								</td> 
								<td v-if="loan.receiver">
									<router-link class="alert-link adtitional-data" :to="{ name: 'usuario', params: { id: loan.receiver.id }}" data-toggle="popover" data-trigger="hover" title="" v-bind:data-content="loan.receiver.name + ' ' + loan.receiver.last_name + ' - ' + loan.receiver.identity_card" data-original-title="Usuario" data-placement="bottom">
										{{loan.receiver.name}}
									</router-link>
								</td>
								<td v-else class="text-info" v-bind:class="{'text-danger':isShowableAlert(loan.return_time)}">
									<i class="fa fa-circle-o"></i>
									Prestamo en curso
								</td> 
								<td>
									<router-link class="btn btn-primary btn-xs" :to="{ name: 'prestamo', params: { id: loan.id }}">
										<i class="fa fa-eye"></i>
										Ver
									</router-link>
									<button class="btn btn-danger btn-xs">
										<i class="fa fa-trash-o"></i> Borrar
									</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				
			</div>
		</div>
	</div>
	
	<script src="lib/jquery.min.js"></script>
	<script src="lib/vue.min.js"></script>
	<script src="lib/vue-router.js"></script>
	<script src="lib/vue-strap.min.js"></script>
	<script src="lib/vue-strap-lang.js"></script>
	<script src="lib/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="lib/moment.js"></script>
	<script type="text/javascript" src="lib/moment-with-locales.js"></script>
	<script src="lib/bootstrap-datepicker-1.6.4-dist/js/bootstrap-datepicker.min.js"></script>
	<script src="lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.es.min.js"></script>
	<script src="lib/toastr-master/build/toastr.min.js"></script>

	<script>
	  Vue.directive("date", {
    "twoWay": true,
    "bind": function () {
        var self = this;

        self.mask = "99/99/9999";
        $(self.el).mask(self.mask, { placeholder:"MM/DD/YYYY" });
        $(self.el).change(function() {
            var value = $(this).val();
            self.set(value);
        });
    },
    "unbind": function () {
        var self = this;
        $(self.el).unmask(self.mask);
    }
});
	</script>
	<script src="lib/vue-infinite-loading.js"></script>
	<script src="js/routes.js"></script>
</body>
</html>